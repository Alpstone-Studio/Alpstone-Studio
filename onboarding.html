<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Design Onboarding - Créez l'identité visuelle de votre site web">
    <title>Design Onboarding | Alpstone Studio</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ==========================================
           ONBOARDING SPECIFIC STYLES
           ========================================== */

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #ffffff 100%);
        }

        .onboarding-container {
            min-height: 100vh;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .onboarding-header {
            text-align: center;
            margin-bottom: 48px;
            animation: fadeInDown 0.8s ease;
        }

        .onboarding-logo {
            height: 60px;
            margin-bottom: 24px;
            filter: drop-shadow(0 2px 8px rgba(67, 141, 215, 0.15));
        }

        .onboarding-title {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .onboarding-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Step Indicator */
        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 48px;
            animation: fadeIn 0.8s ease 0.2s both;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            position: relative;
        }

        .step-number {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(67, 141, 215, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 8px 8px 16px rgba(174, 174, 192, 0.2),
                        -8px -8px 16px rgba(255, 255, 255, 0.8);
        }

        .step.active .step-number {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: scale(1.1);
            box-shadow: 0 4px 20px rgba(67, 141, 215, 0.4);
        }

        .step.completed .step-number {
            background: var(--primary-dark);
            color: white;
            border-color: var(--primary-dark);
        }

        .step-label {
            font-size: 0.85rem;
            color: var(--text-light);
            font-weight: 500;
            white-space: nowrap;
        }

        .step.active .step-label {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Content Area */
        .onboarding-content {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 40px;
            animation: fadeInUp 0.8s ease 0.4s both;
        }

        .content-main {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 48px;
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 12px 12px 24px rgba(174, 174, 192, 0.2),
                        -12px -12px 24px rgba(255, 255, 255, 0.8),
                        inset 2px 2px 5px rgba(255, 255, 255, 0.3);
            min-height: 600px;
        }

        .content-sidebar {
            position: sticky;
            top: 40px;
            height: fit-content;
        }

        .preview-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 32px;
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 12px 12px 24px rgba(174, 174, 192, 0.2),
                        -12px -12px 24px rgba(255, 255, 255, 0.8);
        }

        .preview-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--text-dark);
        }

        .preview-content {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            min-height: 300px;
            box-shadow: inset 4px 4px 8px rgba(174, 174, 192, 0.15);
            transition: all 0.4s ease;
        }

        /* Step Content */
        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        .step-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-dark);
        }

        .step-description {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 32px;
            line-height: 1.6;
        }

        /* Style Preview & Text */
        .style-preview {
            width: 100%;
            height: 80px;
            border-radius: 12px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.05);
        }

        .style-name {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text-dark);
        }

        .style-category {
            font-size: 0.7rem;
            color: var(--primary-color);
            font-weight: 500;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .style-description {
            font-size: 0.8rem;
            color: var(--text-light);
            line-height: 1.4;
        }

        /* Color Picker Section */
        .color-section {
            margin-bottom: 32px;
        }

        .color-role-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-dark);
        }

        .color-picker-wrapper {
            display: flex;
            gap: 16px;
            align-items: center;
            padding: 16px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.05);
        }

        .color-input {
            width: 80px;
            height: 80px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .color-input:hover {
            transform: scale(1.05);
        }

        .color-text-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            font-family: var(--font-primary);
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        .color-text-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(67, 141, 215, 0.1);
        }

        .color-feedback {
            margin-top: 12px;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 0.9rem;
            display: none;
        }

        .color-feedback.valid {
            background: rgba(76, 175, 80, 0.1);
            color: #2E7D32;
            border: 1px solid rgba(76, 175, 80, 0.3);
            display: block;
        }

        .color-feedback.warning {
            background: rgba(255, 152, 0, 0.1);
            color: #E65100;
            border: 1px solid rgba(255, 152, 0, 0.3);
            display: block;
        }

        .color-feedback.error {
            background: rgba(244, 67, 54, 0.1);
            color: #C62828;
            border: 1px solid rgba(244, 67, 54, 0.3);
            display: block;
        }

        /* Typography Options */
        .typo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .typo-option {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px 16px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 8px 8px 16px rgba(174, 174, 192, 0.15);
        }

        .typo-option:hover {
            transform: translateY(-4px);
            box-shadow: 12px 12px 24px rgba(174, 174, 192, 0.25);
        }

        .typo-option.selected {
            border-color: var(--primary-color);
            background: rgba(67, 141, 215, 0.05);
            box-shadow: 0 0 0 3px rgba(67, 141, 215, 0.2);
        }

        .typo-sample {
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .typo-name {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-dark);
        }

        .typo-desc {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        /* Settings Section */
        .settings-grid {
            display: grid;
            gap: 24px;
            margin-top: 24px;
        }

        .setting-item {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            padding: 24px;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.05);
        }

        .setting-label {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-dark);
        }

        .setting-options {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .setting-option {
            padding: 12px 24px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            box-shadow: 4px 4px 8px rgba(174, 174, 192, 0.15);
        }

        .setting-option:hover {
            transform: translateY(-2px);
            box-shadow: 6px 6px 12px rgba(174, 174, 192, 0.2);
        }

        .setting-option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 4px 16px rgba(67, 141, 215, 0.3);
        }

        /* Summary Section */
        .summary-section {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.05);
        }

        .summary-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-dark);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 500;
            color: var(--text-light);
        }

        .summary-value {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Token Display */
        .token-display {
            background: var(--primary-dark);
            color: white;
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(32, 55, 93, 0.3);
        }

        .token-label {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 12px;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .token-value {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            word-break: break-all;
            background: rgba(0, 0, 0, 0.2);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .token-actions {
            display: flex;
            gap: 12px;
        }

        .token-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .token-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 32px;
            gap: 16px;
        }

        .btn-nav {
            padding: 16px 40px;
            border-radius: 12px;
            border: 2px solid transparent;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-prev {
            background: transparent;
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .btn-prev:hover {
            background: rgba(67, 141, 215, 0.1);
            transform: translateY(-2px);
        }

        .btn-next {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 16px rgba(67, 141, 215, 0.25);
        }

        .btn-next:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(67, 141, 215, 0.35);
        }

        .btn-next.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-validate {
            background: linear-gradient(135deg, #4CAF50 0%, #45A049 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);
        }

        .btn-validate:hover {
            box-shadow: 0 8px 24px rgba(76, 175, 80, 0.4);
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* Welcome Screen */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #ffffff 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.5s ease;
        }

        .welcome-screen.hidden {
            display: none;
        }

        .welcome-content {
            text-align: center;
            max-width: 600px;
            padding: 20px;
        }

        .welcome-actions {
            display: flex;
            gap: 24px;
            margin-top: 48px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .welcome-btn {
            padding: 24px 48px;
            border-radius: 16px;
            border: none;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            min-width: 240px;
            box-shadow: 12px 12px 24px rgba(174, 174, 192, 0.2),
                        -12px -12px 24px rgba(255, 255, 255, 0.8);
        }

        .welcome-btn i {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }

        .welcome-btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .welcome-btn-primary:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(67, 141, 215, 0.4);
        }

        .welcome-btn-secondary {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            color: var(--text-dark);
            border: 2px solid var(--primary-color);
        }

        .welcome-btn-secondary:hover {
            transform: translateY(-4px);
            background: rgba(67, 141, 215, 0.1);
        }

        .welcome-btn-subtitle {
            font-size: 0.85rem;
            font-weight: 400;
            opacity: 0.9;
        }

        /* Custom Modal */
        .custom-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .custom-modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(30px);
            border-radius: 30px;
            padding: 48px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .modal-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .modal-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .modal-icon.success {
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
        }

        .modal-icon.error {
            background: rgba(244, 67, 54, 0.1);
            color: #F44336;
        }

        .modal-icon.warning {
            background: rgba(255, 152, 0, 0.1);
            color: #FF9800;
        }

        .modal-icon.info {
            background: rgba(67, 141, 215, 0.1);
            color: var(--primary-color);
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-dark);
            flex: 1;
        }

        .modal-body {
            margin-bottom: 32px;
            font-size: 1.05rem;
            color: var(--text-light);
            line-height: 1.6;
        }

        .modal-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(67, 141, 215, 0.2);
            border-radius: 12px;
            font-family: var(--font-primary);
            font-size: 1rem;
            margin-bottom: 24px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(67, 141, 215, 0.1);
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 14px 32px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn-primary {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 16px rgba(67, 141, 215, 0.3);
        }

        .modal-btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .modal-btn-secondary {
            background: rgba(0, 0, 0, 0.05);
            color: var(--text-dark);
        }

        .modal-btn-secondary:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Example Fullscreen Modal */
        .example-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            z-index: 3000;
            overflow-y: auto;
        }

        .example-modal.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .example-close {
            position: fixed;
            top: 32px;
            right: 32px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 3001;
        }

        .example-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .example-content {
            padding: 80px 40px 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .example-header {
            text-align: center;
            margin-bottom: 48px;
            color: white;
        }

        .example-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
            margin-bottom: 12px;
        }

        .example-name {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .example-desc {
            font-size: 1.2rem;
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto;
        }

        .example-preview {
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.5);
            margin-bottom: 32px;
        }

        .example-site {
            min-height: 600px;
            padding: 0;
        }

        /* Smaller cards for full picture mode */
        .style-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .style-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 16px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 8px 8px 16px rgba(174, 174, 192, 0.15),
                        -8px -8px 16px rgba(255, 255, 255, 0.7);
            position: relative;
        }

        .style-card:hover {
            transform: translateY(-4px);
            box-shadow: 12px 12px 24px rgba(174, 174, 192, 0.25),
                        -12px -12px 24px rgba(255, 255, 255, 0.9),
                        0 8px 32px rgba(67, 141, 215, 0.2);
        }

        .style-card.selected {
            border-color: var(--primary-color);
            background: rgba(67, 141, 215, 0.05);
            box-shadow: 0 0 0 3px rgba(67, 141, 215, 0.2),
                        12px 12px 24px rgba(174, 174, 192, 0.25);
        }

        .style-preview-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(67, 141, 215, 0.9);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .style-card:hover .style-preview-btn {
            opacity: 1;
        }

        .style-preview-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }

        /* Responsive */
        @media (max-width: 968px) {
            .onboarding-content {
                grid-template-columns: 1fr;
            }

            .content-sidebar {
                position: relative;
                top: 0;
                order: -1;
            }

            .step-indicator {
                flex-wrap: wrap;
                gap: 12px;
            }

            .step-label {
                display: none;
            }

            .style-grid,
            .typo-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .welcome-actions {
                flex-direction: column;
            }

            .example-name {
                font-size: 2rem;
            }
        }

        @media (max-width: 640px) {
            .onboarding-title {
                font-size: 2rem;
            }

            .content-main {
                padding: 24px;
            }

            .preview-card {
                padding: 20px;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .btn-nav {
                width: 100%;
                justify-content: center;
            }

            .modal-content {
                padding: 32px 24px;
            }

            .example-content {
                padding: 60px 20px 20px;
            }

            .style-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
        <div class="welcome-content">
            <img src="Logos/Alpstone-studio-vertical/Transparent-background-vertical.png" alt="Alpstone Studio" class="onboarding-logo">
            <h1 class="onboarding-title">Design Onboarding</h1>
            <p class="onboarding-subtitle">Créez l'identité visuelle complète de votre site web en quelques étapes simples</p>

            <div class="welcome-actions">
                <button class="welcome-btn welcome-btn-primary" onclick="startOnboarding()">
                    <i class="fas fa-paint-brush"></i>
                    <span>Créer mon design</span>
                    <span class="welcome-btn-subtitle">Commencer l'onboarding</span>
                </button>
                <button class="welcome-btn welcome-btn-secondary" onclick="showTokenInput()">
                    <i class="fas fa-key"></i>
                    <span>J'ai déjà un token</span>
                    <span class="welcome-btn-subtitle">Charger une configuration</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Modal -->
    <div class="custom-modal" id="customModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <h3 class="modal-title" id="modalTitle">Titre</h3>
            </div>
            <div class="modal-body" id="modalBody">Message</div>
            <div id="modalInputContainer"></div>
            <div class="modal-actions" id="modalActions">
                <button class="modal-btn modal-btn-primary" id="modalConfirm">OK</button>
            </div>
        </div>
    </div>

    <!-- Example Fullscreen Modal -->
    <div class="example-modal" id="exampleModal">
        <button class="example-close" onclick="closeExample()">
            <i class="fas fa-times"></i>
        </button>
        <div class="example-content">
            <div class="example-header">
                <div class="example-label" id="exampleCategory">CATÉGORIE</div>
                <h2 class="example-name" id="exampleName">Nom du style</h2>
                <p class="example-desc" id="exampleDesc">Description du style</p>
            </div>
            <div class="example-preview">
                <div class="example-site" id="exampleSite">
                    <!-- Dynamic content will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <div class="onboarding-container" id="onboardingContainer" style="display: none;">
        <!-- Header -->
        <div class="onboarding-header">
            <img src="Logos/Alpstone-studio-vertical/Transparent-background-vertical.png" alt="Alpstone Studio" class="onboarding-logo">
            <h1 class="onboarding-title">Design Onboarding</h1>
            <p class="onboarding-subtitle">Créez l'identité visuelle complète de votre site web en quelques étapes simples</p>
        </div>

        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Style Visuel</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Couleurs</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Typographie</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Ambiance</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Résumé</div>
            </div>
        </div>

        <!-- Content -->
        <div class="onboarding-content">
            <!-- Main Content -->
            <div class="content-main">
                <!-- Step 1: Style Selection -->
                <div class="step-content active" data-step="1">
                    <h2 class="step-title">Choisissez votre style visuel</h2>
                    <p class="step-description">Sélectionnez le style qui correspond le mieux à votre vision</p>

                    <div class="style-grid">
                        <div class="style-card" data-style="MIN" data-category="Classique">
                            <button class="style-preview-btn" onclick="showExample('MIN', event)">
                                <i class="fas fa-expand"></i>
                            </button>
                            <div class="style-preview">
                                <i class="fas fa-mobile-alt" style="color: #000;"></i>
                            </div>
                            <div class="style-category">Classique</div>
                            <div class="style-name">Minimal Pro</div>
                            <div class="style-description">Épuré et moderne</div>
                        </div>

                        <div class="style-card" data-style="GLS" data-category="Moderne">
                            <button class="style-preview-btn" onclick="showExample('GLS', event)">
                                <i class="fas fa-expand"></i>
                            </button>
                            <div class="style-preview">
                                <i class="fas fa-gem" style="color: #438DD7;"></i>
                            </div>
                            <div class="style-category">Moderne</div>
                            <div class="style-name">Modern Glass</div>
                            <div class="style-description">Transparences premium</div>
                        </div>

                        <div class="style-card" data-style="SFT" data-category="Classique">
                            <button class="style-preview-btn" onclick="showExample('SFT', event)">
                                <i class="fas fa-expand"></i>
                            </button>
                            <div class="style-preview">
                                <i class="fas fa-circle" style="color: #4285F4;"></i>
                            </div>
                            <div class="style-category">Classique</div>
                            <div class="style-name">Soft UI</div>
                            <div class="style-description">Doux et arrondi</div>
                        </div>

                        <div class="style-card" data-style="EDT" data-category="Audacieux">
                            <button class="style-preview-btn" onclick="showExample('EDT', event)">
                                <i class="fas fa-expand"></i>
                            </button>
                            <div class="style-preview">
                                <i class="fas fa-palette" style="color: #E91E63;"></i>
                            </div>
                            <div class="style-category">Audacieux</div>
                            <div class="style-name">Editorial</div>
                            <div class="style-description">Coloré et expressif</div>
                        </div>

                        <div class="style-card" data-style="LUX" data-category="Premium">
                            <button class="style-preview-btn" onclick="showExample('LUX', event)">
                                <i class="fas fa-expand"></i>
                            </button>
                            <div class="style-preview">
                                <i class="fas fa-crown" style="color: #D4AF37;"></i>
                            </div>
                            <div class="style-category">Premium</div>
                            <div class="style-name">Luxury Dark</div>
                            <div class="style-description">Élégance sombre</div>
                        </div>

                        <div class="style-card" data-style="BRT" data-category="Audacieux">
                            <button class="style-preview-btn" onclick="showExample('BRT', event)">
                                <i class="fas fa-expand"></i>
                            </button>
                            <div class="style-preview">
                                <i class="fas fa-cube" style="color: #FF5722;"></i>
                            </div>
                            <div class="style-category">Audacieux</div>
                            <div class="style-name">Brutal Modern</div>
                            <div class="style-description">Industriel audacieux</div>
                        </div>

                        <div class="style-card" data-style="RTF" data-category="Audacieux">
                            <button class="style-preview-btn" onclick="showExample('RTF', event)">
                                <i class="fas fa-expand"></i>
                            </button>
                            <div class="style-preview">
                                <i class="fas fa-rocket" style="color: #9C27B0;"></i>
                            </div>
                            <div class="style-category">Audacieux</div>
                            <div class="style-name">Retro Future</div>
                            <div class="style-description">Néons et géométrie</div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Colors -->
                <div class="step-content" data-step="2">
                    <h2 class="step-title">Définissez vos couleurs</h2>
                    <p class="step-description">Choisissez les couleurs principales de votre identité visuelle</p>

                    <div class="color-section">
                        <h3 class="color-role-title">Couleur Principale</h3>
                        <div class="color-picker-wrapper">
                            <input type="color" id="color-primary" class="color-input" value="#438DD7">
                            <input type="text" id="color-primary-text" class="color-text-input" value="#438DD7" placeholder="#438DD7">
                        </div>
                        <div class="color-feedback" id="feedback-primary"></div>
                    </div>

                    <div class="color-section">
                        <h3 class="color-role-title">Couleur d'Arrière-plan</h3>
                        <div class="color-picker-wrapper">
                            <input type="color" id="color-background" class="color-input" value="#FFFFFF">
                            <input type="text" id="color-background-text" class="color-text-input" value="#FFFFFF" placeholder="#FFFFFF">
                        </div>
                        <div class="color-feedback" id="feedback-background"></div>
                    </div>

                    <div class="color-section">
                        <h3 class="color-role-title">Couleur d'Accent</h3>
                        <div class="color-picker-wrapper">
                            <input type="color" id="color-accent" class="color-input" value="#20375D">
                            <input type="text" id="color-accent-text" class="color-text-input" value="#20375D" placeholder="#20375D">
                        </div>
                        <div class="color-feedback" id="feedback-accent"></div>
                    </div>
                </div>

                <!-- Step 3: Typography -->
                <div class="step-content" data-step="3">
                    <h2 class="step-title">Style typographique</h2>
                    <p class="step-description">Sélectionnez l'ambiance typographique de votre site</p>

                    <div class="typo-grid">
                        <div class="typo-option" data-typo="M1">
                            <div class="typo-sample" style="font-family: -apple-system, sans-serif;">Aa</div>
                            <div class="typo-name">Moderne & lisible</div>
                            <div class="typo-desc">Système, neutre, universel</div>
                        </div>

                        <div class="typo-option" data-typo="M2">
                            <div class="typo-sample" style="font-family: 'Georgia', serif;">Aa</div>
                            <div class="typo-name">Élégant & premium</div>
                            <div class="typo-desc">Serif, raffiné, classique</div>
                        </div>

                        <div class="typo-option" data-typo="M3">
                            <div class="typo-sample" style="font-family: 'Arial Rounded', sans-serif; font-weight: 700;">Aa</div>
                            <div class="typo-name">Expressif & créatif</div>
                            <div class="typo-desc">Arrondi, dynamique, jeune</div>
                        </div>

                        <div class="typo-option" data-typo="M4">
                            <div class="typo-sample" style="font-family: 'Helvetica', sans-serif;">Aa</div>
                            <div class="typo-name">Neutre & corporate</div>
                            <div class="typo-desc">Professionnel, sobre, fiable</div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Ambiance -->
                <div class="step-content" data-step="4">
                    <h2 class="step-title">Ambiance & interactions</h2>
                    <p class="step-description">Affinez l'expérience utilisateur de votre site</p>

                    <div class="settings-grid">
                        <div class="setting-item">
                            <div class="setting-label">Animations</div>
                            <div class="setting-options">
                                <div class="setting-option" data-setting="anim" data-value="0">Aucune</div>
                                <div class="setting-option" data-setting="anim" data-value="1">Légères</div>
                                <div class="setting-option selected" data-setting="anim" data-value="2">Présentes</div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-label">Arrondis</div>
                            <div class="setting-options">
                                <div class="setting-option" data-setting="radius" data-value="1">Nets</div>
                                <div class="setting-option" data-setting="radius" data-value="2">Modérés</div>
                                <div class="setting-option selected" data-setting="radius" data-value="3">Doux</div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-label">Densité</div>
                            <div class="setting-options">
                                <div class="setting-option" data-setting="density" data-value="1">Compacte</div>
                                <div class="setting-option selected" data-setting="density" data-value="2">Équilibrée</div>
                                <div class="setting-option" data-setting="density" data-value="3">Aérée</div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-label">Transitions</div>
                            <div class="setting-options">
                                <div class="setting-option" data-setting="trans" data-value="1">Instant</div>
                                <div class="setting-option selected" data-setting="trans" data-value="2">Fluide</div>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-label">Scroll</div>
                            <div class="setting-options">
                                <div class="setting-option selected" data-setting="scroll" data-value="1">Standard</div>
                                <div class="setting-option" data-setting="scroll" data-value="2">Animé léger</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Summary -->
                <div class="step-content" data-step="5">
                    <h2 class="step-title">Résumé de votre design</h2>
                    <p class="step-description">Vérifiez vos choix avant de valider</p>

                    <div class="summary-section">
                        <h3 class="summary-title">Configuration</h3>
                        <div class="summary-item">
                            <span class="summary-label">Style Visuel</span>
                            <span class="summary-value" id="summary-style">—</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Couleur Principale</span>
                            <span class="summary-value" id="summary-primary">—</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Arrière-plan</span>
                            <span class="summary-value" id="summary-background">—</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Accent</span>
                            <span class="summary-value" id="summary-accent">—</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Typographie</span>
                            <span class="summary-value" id="summary-typo">—</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Animations</span>
                            <span class="summary-value" id="summary-anim">—</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Arrondis</span>
                            <span class="summary-value" id="summary-radius">—</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Densité</span>
                            <span class="summary-value" id="summary-density">—</span>
                        </div>
                    </div>

                    <div class="token-display">
                        <div class="token-label">Votre Token Design</div>
                        <div class="token-value" id="token-value">DG1|S:GLS|C:438DD7-FFFFFF-20375D|T:M1|A:2|R:3|D:2|TR:2|SC:1</div>
                        <div class="token-actions">
                            <button class="token-btn" onclick="copyToken()">
                                <i class="fas fa-copy"></i> Copier
                            </button>
                            <button class="token-btn" onclick="loadToken()">
                                <i class="fas fa-download"></i> Charger
                            </button>
                        </div>
                    </div>

                    <div style="background: rgba(67, 141, 215, 0.1); padding: 20px; border-radius: 16px; border-left: 4px solid var(--primary-color);">
                        <h4 style="font-weight: 600; margin-bottom: 8px; color: var(--primary-dark);">
                            <i class="fas fa-info-circle"></i> À propos du token
                        </h4>
                        <p style="font-size: 0.95rem; color: var(--text-light); line-height: 1.6;">
                            Ce token contient l'intégralité de vos choix design. Conservez-le précieusement pour réutiliser ou modifier votre configuration à tout moment. Aucune donnée n'est stockée sur nos serveurs.
                        </p>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="nav-buttons">
                    <button class="btn-nav btn-prev" onclick="previousStep()" style="visibility: hidden;">
                        <i class="fas fa-chevron-left"></i> Précédent
                    </button>
                    <button class="btn-nav btn-next" onclick="nextStep()">
                        Suivant <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Sidebar Preview -->
            <div class="content-sidebar">
                <div class="preview-card">
                    <h3 class="preview-title">Aperçu en temps réel</h3>
                    <div class="preview-content" id="preview">
                        <div style="margin-bottom: 16px;">
                            <div style="height: 40px; border-radius: 8px; margin-bottom: 12px;" id="preview-bar"></div>
                            <div style="height: 80px; border-radius: 12px; margin-bottom: 12px;" id="preview-hero"></div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                <div style="height: 60px; border-radius: 8px;" id="preview-card1"></div>
                                <div style="height: 60px; border-radius: 8px;" id="preview-card2"></div>
                            </div>
                        </div>
                        <div style="text-align: center; padding: 16px;">
                            <div style="width: 100px; height: 36px; margin: 0 auto; border-radius: 8px;" id="preview-button"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // State Management
        let currentStep = 1;
        const totalSteps = 5;

        const designState = {
            version: 'DG1',
            style: '',
            colors: {
                primary: '#438DD7',
                background: '#FFFFFF',
                accent: '#20375D'
            },
            typography: '',
            settings: {
                animations: 2,
                radius: 3,
                density: 2,
                transitions: 2,
                scroll: 1
            }
        };

        // Style mappings
        const styleNames = {
            'MIN': 'Minimal Pro',
            'GLS': 'Modern Glass',
            'SFT': 'Soft UI',
            'EDT': 'Editorial',
            'LUX': 'Luxury Dark',
            'BRT': 'Brutal Modern',
            'RTF': 'Retro Future'
        };

        const typoNames = {
            'M1': 'Moderne & lisible',
            'M2': 'Élégant & premium',
            'M3': 'Expressif & créatif',
            'M4': 'Neutre & corporate'
        };

        const settingLabels = {
            animations: ['Aucune', 'Légères', 'Présentes'],
            radius: ['Nets', 'Modérés', 'Doux'],
            density: ['Compacte', 'Équilibrée', 'Aérée'],
            transitions: ['Instant', 'Fluide'],
            scroll: ['Standard', 'Animé léger']
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initStyleCards();
            initColorPickers();
            initTypoOptions();
            initSettings();
            updatePreview();
            checkURLToken();
        });

        // Check if token in URL
        function checkURLToken() {
            const urlParams = new URLSearchParams(window.location.search);
            const token = urlParams.get('token');
            if (token) {
                parseToken(token);
                updateUI();
            }
        }

        // Style Cards
        function initStyleCards() {
            document.querySelectorAll('.style-card').forEach(card => {
                card.addEventListener('click', () => {
                    document.querySelectorAll('.style-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    designState.style = card.dataset.style;
                    updatePreview();
                    enableNextButton();
                });
            });
        }

        // Color Pickers
        function initColorPickers() {
            const colorTypes = ['primary', 'background', 'accent'];

            colorTypes.forEach(type => {
                const colorInput = document.getElementById(`color-${type}`);
                const textInput = document.getElementById(`color-${type}-text`);
                const feedback = document.getElementById(`feedback-${type}`);

                colorInput.addEventListener('input', (e) => {
                    const color = e.target.value;
                    textInput.value = color;
                    designState.colors[type] = color;
                    validateColors();
                    updatePreview();
                });

                textInput.addEventListener('input', (e) => {
                    let color = e.target.value;
                    if (color.startsWith('#') && /^#[0-9A-F]{6}$/i.test(color)) {
                        colorInput.value = color;
                        designState.colors[type] = color;
                        validateColors();
                        updatePreview();
                    }
                });
            });
        }

        // Validate Colors with enhanced feedback
        function validateColors() {
            const { primary, background, accent } = designState.colors;

            // Calculate contrast ratio
            const getContrast = (color1, color2) => {
                const getLuminance = (hex) => {
                    const rgb = parseInt(hex.slice(1), 16);
                    const r = (rgb >> 16) & 0xff;
                    const g = (rgb >> 8) & 0xff;
                    const b = (rgb >> 0) & 0xff;
                    const [rs, gs, bs] = [r, g, b].map(c => {
                        c = c / 255;
                        return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
                    });
                    return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
                };

                const l1 = getLuminance(color1);
                const l2 = getLuminance(color2);
                const lighter = Math.max(l1, l2);
                const darker = Math.min(l1, l2);
                return (lighter + 0.05) / (darker + 0.05);
            };

            // Get suggested color adjustments
            const getSuggestion = (baseColor, targetColor, targetContrast) => {
                const baseLum = getLuminance(baseColor);
                const targetLum = getLuminance(targetColor);

                // Determine if we need to darken or lighten
                const needsDarker = baseLum > 0.5;

                // Generate suggestion
                const rgb = parseInt(baseColor.slice(1), 16);
                let r = (rgb >> 16) & 0xff;
                let g = (rgb >> 8) & 0xff;
                let b = (rgb >> 0) & 0xff;

                const adjustment = needsDarker ? -30 : 30;
                r = Math.max(0, Math.min(255, r + adjustment));
                g = Math.max(0, Math.min(255, g + adjustment));
                b = Math.max(0, Math.min(255, b + adjustment));

                return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            };

            const getLuminance = (hex) => {
                const rgb = parseInt(hex.slice(1), 16);
                const r = (rgb >> 16) & 0xff;
                const g = (rgb >> 8) & 0xff;
                const b = (rgb >> 0) & 0xff;
                const [rs, gs, bs] = [r, g, b].map(c => {
                    c = c / 255;
                    return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
                });
                return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
            };

            const primaryBgContrast = getContrast(primary, background);
            const accentBgContrast = getContrast(accent, background);

            // Enhanced feedback for primary
            const feedbackPrimary = document.getElementById('feedback-primary');
            if (primaryBgContrast >= 4.5) {
                feedbackPrimary.className = 'color-feedback valid';
                feedbackPrimary.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <strong>Parfait !</strong> Votre couleur principale est parfaitement lisible sur le fond.
                    Le contraste de ${primaryBgContrast.toFixed(1)}:1 garantit une excellente accessibilité.
                `;
            } else if (primaryBgContrast >= 3) {
                feedbackPrimary.className = 'color-feedback warning';
                const suggestion = getSuggestion(primary, background, 4.5);
                feedbackPrimary.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Acceptable mais peut mieux faire</strong><br>
                    Le contraste actuel de ${primaryBgContrast.toFixed(1)}:1 est correct pour les gros textes,
                    mais peut poser des problèmes de lisibilité sur les petits textes.<br>
                    <button class="modal-btn modal-btn-primary" style="margin-top: 8px; padding: 8px 16px;"
                            onclick="applySuggestion('primary', '${suggestion}')">
                        <i class="fas fa-magic"></i> Essayer ${suggestion}
                    </button>
                `;
            } else {
                feedbackPrimary.className = 'color-feedback error';
                const suggestion = getSuggestion(primary, background, 4.5);
                feedbackPrimary.innerHTML = `
                    <i class="fas fa-times-circle"></i>
                    <strong>Attention : contraste trop faible</strong><br>
                    Avec un ratio de seulement ${primaryBgContrast.toFixed(1)}:1, votre texte sera difficile à lire.
                    Les visiteurs malvoyants ne pourront pas utiliser votre site correctement.<br>
                    <strong>Solution :</strong> ${getLuminance(background) > 0.5 ? 'Utilisez une couleur plus foncée' : 'Utilisez une couleur plus claire'}<br>
                    <button class="modal-btn modal-btn-primary" style="margin-top: 8px; padding: 8px 16px;"
                            onclick="applySuggestion('primary', '${suggestion}')">
                        <i class="fas fa-magic"></i> Essayer ${suggestion}
                    </button>
                `;
            }

            // Enhanced feedback for accent
            const feedbackAccent = document.getElementById('feedback-accent');
            if (accentBgContrast >= 4.5) {
                feedbackAccent.className = 'color-feedback valid';
                feedbackAccent.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <strong>Excellent !</strong> Votre couleur d'accent a un contraste parfait (${accentBgContrast.toFixed(1)}:1).
                `;
            } else if (accentBgContrast >= 3) {
                feedbackAccent.className = 'color-feedback warning';
                const suggestion = getSuggestion(accent, background, 4.5);
                feedbackAccent.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Contraste moyen</strong> (${accentBgContrast.toFixed(1)}:1) -
                    Convenable pour les éléments décoratifs, mais évitez de l'utiliser pour du texte important.<br>
                    <button class="modal-btn modal-btn-primary" style="margin-top: 8px; padding: 8px 16px;"
                            onclick="applySuggestion('accent', '${suggestion}')">
                        <i class="fas fa-magic"></i> Améliorer automatiquement
                    </button>
                `;
            } else {
                feedbackAccent.className = 'color-feedback error';
                const suggestion = getSuggestion(accent, background, 4.5);
                feedbackAccent.innerHTML = `
                    <i class="fas fa-times-circle"></i>
                    <strong>Contraste insuffisant</strong> (${accentBgContrast.toFixed(1)}:1)<br>
                    Cette couleur sera invisible sur votre fond. ${getLuminance(background) > 0.5 ? 'Choisissez une teinte plus foncée' : 'Choisissez une teinte plus claire'}.<br>
                    <button class="modal-btn modal-btn-primary" style="margin-top: 8px; padding: 8px 16px;"
                            onclick="applySuggestion('accent', '${suggestion}')">
                        <i class="fas fa-magic"></i> Corriger automatiquement
                    </button>
                `;
            }
        }

        // Apply color suggestion
        function applySuggestion(colorType, suggestedColor) {
            designState.colors[colorType] = suggestedColor;
            document.getElementById(`color-${colorType}`).value = suggestedColor;
            document.getElementById(`color-${colorType}-text`).value = suggestedColor;
            validateColors();
            updatePreview();
        }

        // Typography Options
        function initTypoOptions() {
            document.querySelectorAll('.typo-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.typo-option').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                    designState.typography = option.dataset.typo;
                    updatePreview();
                    enableNextButton();
                });
            });
        }

        // Settings
        function initSettings() {
            document.querySelectorAll('.setting-option').forEach(option => {
                option.addEventListener('click', () => {
                    const setting = option.dataset.setting;
                    const value = parseInt(option.dataset.value);

                    document.querySelectorAll(`.setting-option[data-setting="${setting}"]`).forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');

                    designState.settings[setting === 'anim' ? 'animations' :
                                        setting === 'trans' ? 'transitions' : setting] = value;
                    updatePreview();
                });
            });
        }

        // Update Preview
        function updatePreview() {
            const { primary, background, accent } = designState.colors;
            const { radius } = designState.settings;

            const borderRadius = radius === 1 ? '4px' : radius === 2 ? '8px' : '16px';

            document.getElementById('preview').style.backgroundColor = background;

            document.getElementById('preview-bar').style.backgroundColor = background;
            document.getElementById('preview-bar').style.borderRadius = borderRadius;
            document.getElementById('preview-bar').style.border = `2px solid ${primary}`;

            document.getElementById('preview-hero').style.backgroundColor = primary;
            document.getElementById('preview-hero').style.borderRadius = borderRadius;

            document.getElementById('preview-card1').style.backgroundColor = background;
            document.getElementById('preview-card1').style.borderRadius = borderRadius;
            document.getElementById('preview-card1').style.border = `1px solid ${primary}40`;

            document.getElementById('preview-card2').style.backgroundColor = background;
            document.getElementById('preview-card2').style.borderRadius = borderRadius;
            document.getElementById('preview-card2').style.border = `1px solid ${primary}40`;

            document.getElementById('preview-button').style.backgroundColor = accent;
            document.getElementById('preview-button').style.borderRadius = borderRadius;
        }

        // Navigation
        function nextStep() {
            if (currentStep < totalSteps) {
                // Validate current step
                if (!validateStep(currentStep)) {
                    return;
                }

                currentStep++;
                updateStepDisplay();

                // Update summary on last step
                if (currentStep === 5) {
                    updateSummary();
                    generateToken();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Update step indicator
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });

            // Update content
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelector(`.step-content[data-step="${currentStep}"]`).classList.add('active');

            // Update navigation buttons
            const prevBtn = document.querySelector('.btn-prev');
            const nextBtn = document.querySelector('.btn-next');

            prevBtn.style.visibility = currentStep === 1 ? 'hidden' : 'visible';

            if (currentStep === totalSteps) {
                nextBtn.innerHTML = '<i class="fas fa-check"></i> Valider ce style';
                nextBtn.classList.add('btn-validate');
                nextBtn.onclick = validateDesign;
            } else {
                nextBtn.innerHTML = 'Suivant <i class="fas fa-chevron-right"></i>';
                nextBtn.classList.remove('btn-validate');
                nextBtn.onclick = nextStep;
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function validateStep(step) {
            switch(step) {
                case 1:
                    if (!designState.style) {
                        alert('Veuillez sélectionner un style visuel');
                        return false;
                    }
                    break;
                case 3:
                    if (!designState.typography) {
                        alert('Veuillez sélectionner une typographie');
                        return false;
                    }
                    break;
            }
            return true;
        }

        function enableNextButton() {
            document.querySelector('.btn-next').classList.remove('disabled');
        }

        // Update Summary
        function updateSummary() {
            document.getElementById('summary-style').textContent = styleNames[designState.style] || '—';
            document.getElementById('summary-primary').textContent = designState.colors.primary;
            document.getElementById('summary-background').textContent = designState.colors.background;
            document.getElementById('summary-accent').textContent = designState.colors.accent;
            document.getElementById('summary-typo').textContent = typoNames[designState.typography] || '—';
            document.getElementById('summary-anim').textContent = settingLabels.animations[designState.settings.animations];
            document.getElementById('summary-radius').textContent = settingLabels.radius[designState.settings.radius - 1];
            document.getElementById('summary-density').textContent = settingLabels.density[designState.settings.density - 1];
        }

        // Token Generation
        function generateToken() {
            const { version, style, colors, typography, settings } = designState;

            // Format: DG1|S:GLS|C:438DD7-FFFFFF-20375D|T:M1|A:2|R:3|D:2|TR:2|SC:1
            const colorStr = `${colors.primary.replace('#', '')}-${colors.background.replace('#', '')}-${colors.accent.replace('#', '')}`;
            const token = `${version}|S:${style}|C:${colorStr}|T:${typography}|A:${settings.animations}|R:${settings.radius}|D:${settings.density}|TR:${settings.transitions}|SC:${settings.scroll}`;

            document.getElementById('token-value').textContent = token;
            return token;
        }

        // Token Parsing
        function parseToken(token) {
            try {
                const parts = token.split('|');

                designState.version = parts[0];

                parts.forEach(part => {
                    if (part.startsWith('S:')) {
                        designState.style = part.substring(2);
                    } else if (part.startsWith('C:')) {
                        const colors = part.substring(2).split('-');
                        designState.colors.primary = '#' + colors[0];
                        designState.colors.background = '#' + colors[1];
                        designState.colors.accent = '#' + colors[2];
                    } else if (part.startsWith('T:')) {
                        designState.typography = part.substring(2);
                    } else if (part.startsWith('A:')) {
                        designState.settings.animations = parseInt(part.substring(2));
                    } else if (part.startsWith('R:')) {
                        designState.settings.radius = parseInt(part.substring(2));
                    } else if (part.startsWith('D:')) {
                        designState.settings.density = parseInt(part.substring(2));
                    } else if (part.startsWith('TR:')) {
                        designState.settings.transitions = parseInt(part.substring(2));
                    } else if (part.startsWith('SC:')) {
                        designState.settings.scroll = parseInt(part.substring(2));
                    }
                });

                return true;
            } catch (e) {
                console.error('Invalid token:', e);
                return false;
            }
        }

        // Update UI from state
        function updateUI() {
            // Select style card
            document.querySelectorAll('.style-card').forEach(card => {
                if (card.dataset.style === designState.style) {
                    card.classList.add('selected');
                }
            });

            // Update color pickers
            document.getElementById('color-primary').value = designState.colors.primary;
            document.getElementById('color-primary-text').value = designState.colors.primary;
            document.getElementById('color-background').value = designState.colors.background;
            document.getElementById('color-background-text').value = designState.colors.background;
            document.getElementById('color-accent').value = designState.colors.accent;
            document.getElementById('color-accent-text').value = designState.colors.accent;

            // Select typography
            document.querySelectorAll('.typo-option').forEach(option => {
                if (option.dataset.typo === designState.typography) {
                    option.classList.add('selected');
                }
            });

            // Select settings
            Object.keys(designState.settings).forEach(key => {
                const settingKey = key === 'animations' ? 'anim' :
                                  key === 'transitions' ? 'trans' : key;
                const value = designState.settings[key];

                document.querySelectorAll(`.setting-option[data-setting="${settingKey}"]`).forEach(option => {
                    if (parseInt(option.dataset.value) === value) {
                        option.classList.add('selected');
                    }
                });
            });

            validateColors();
            updatePreview();
        }

        // Welcome Screen Functions
        function startOnboarding() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('onboardingContainer').style.display = 'flex';
        }

        function showTokenInput() {
            showPrompt(
                'Entrez votre token',
                'Collez votre token design pour charger votre configuration existante :',
                'info',
                (token) => {
                    if (token && parseToken(token)) {
                        updateUI();
                        currentStep = 1;
                        updateStepDisplay();
                        document.getElementById('welcomeScreen').classList.add('hidden');
                        document.getElementById('onboardingContainer').style.display = 'flex';
                        showAlert('Token chargé avec succès !', 'Votre configuration a été restaurée.', 'success');
                    } else if (token) {
                        showAlert('Token invalide', 'Le token que vous avez entré n\'est pas valide. Veuillez vérifier le format.', 'error');
                    }
                }
            );
        }

        // Custom Modal Functions
        function showAlert(title, message, type = 'info', callback = null) {
            const modal = document.getElementById('customModal');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const modalActions = document.getElementById('modalActions');
            const modalInputContainer = document.getElementById('modalInputContainer');

            // Set icon based on type
            modalIcon.className = `modal-icon ${type}`;
            if (type === 'success') {
                modalIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
            } else if (type === 'error') {
                modalIcon.innerHTML = '<i class="fas fa-times-circle"></i>';
            } else if (type === 'warning') {
                modalIcon.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
            } else {
                modalIcon.innerHTML = '<i class="fas fa-info-circle"></i>';
            }

            modalTitle.textContent = title;
            modalBody.textContent = message;
            modalInputContainer.innerHTML = '';

            modalActions.innerHTML = `
                <button class="modal-btn modal-btn-primary" onclick="closeModal(${callback ? 'true' : 'false'})">
                    OK
                </button>
            `;

            modal.classList.add('active');

            if (callback) {
                modal.dataset.callback = callback.toString();
            }
        }

        function showConfirm(title, message, type = 'info', onConfirm = null, onCancel = null) {
            const modal = document.getElementById('customModal');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const modalActions = document.getElementById('modalActions');
            const modalInputContainer = document.getElementById('modalInputContainer');

            modalIcon.className = `modal-icon ${type}`;
            if (type === 'success') {
                modalIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
            } else if (type === 'error') {
                modalIcon.innerHTML = '<i class="fas fa-times-circle"></i>';
            } else if (type === 'warning') {
                modalIcon.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
            } else {
                modalIcon.innerHTML = '<i class="fas fa-info-circle"></i>';
            }

            modalTitle.textContent = title;
            modalBody.textContent = message;
            modalInputContainer.innerHTML = '';

            modalActions.innerHTML = `
                <button class="modal-btn modal-btn-secondary" onclick="closeModal(false, true)">
                    Annuler
                </button>
                <button class="modal-btn modal-btn-primary" onclick="closeModal(true, false)">
                    Confirmer
                </button>
            `;

            modal.classList.add('active');

            if (onConfirm) {
                modal.dataset.onConfirm = onConfirm.toString();
            }
            if (onCancel) {
                modal.dataset.onCancel = onCancel.toString();
            }
        }

        function showPrompt(title, message, type = 'info', callback = null) {
            const modal = document.getElementById('customModal');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            const modalActions = document.getElementById('modalActions');
            const modalInputContainer = document.getElementById('modalInputContainer');

            modalIcon.className = `modal-icon ${type}`;
            modalIcon.innerHTML = '<i class="fas fa-keyboard"></i>';

            modalTitle.textContent = title;
            modalBody.textContent = message;

            modalInputContainer.innerHTML = '<input type="text" class="modal-input" id="promptInput" placeholder="Entrez votre token...">';

            modalActions.innerHTML = `
                <button class="modal-btn modal-btn-secondary" onclick="closeModal(false, true)">
                    Annuler
                </button>
                <button class="modal-btn modal-btn-primary" onclick="submitPrompt()">
                    Valider
                </button>
            `;

            modal.classList.add('active');

            if (callback) {
                window.promptCallback = callback;
            }

            // Focus input
            setTimeout(() => {
                document.getElementById('promptInput').focus();
            }, 100);
        }

        function submitPrompt() {
            const input = document.getElementById('promptInput');
            const value = input ? input.value : null;

            if (window.promptCallback) {
                window.promptCallback(value);
                window.promptCallback = null;
            }

            closeModal(false);
        }

        function closeModal(executeCallback = false, executeCancel = false) {
            const modal = document.getElementById('customModal');

            if (executeCallback && modal.dataset.onConfirm) {
                eval('(' + modal.dataset.onConfirm + ')()');
                delete modal.dataset.onConfirm;
            } else if (executeCancel && modal.dataset.onCancel) {
                eval('(' + modal.dataset.onCancel + ')()');
                delete modal.dataset.onCancel;
            }

            modal.classList.remove('active');
        }

        // Example Modal Functions
        function showExample(styleCode, event) {
            if (event) {
                event.stopPropagation();
            }

            const styleData = {
                'MIN': {
                    name: 'Minimal Pro',
                    category: 'Classique',
                    description: 'Design épuré et moderne inspiré par Apple. Espaces blancs généreux, typographie claire et élégante.',
                },
                'GLS': {
                    name: 'Modern Glass',
                    category: 'Moderne',
                    description: 'Effets de verre dépoli et transparences sophistiquées. Style premium et innovant avec des effets visuels captivants.',
                },
                'SFT': {
                    name: 'Soft UI',
                    category: 'Classique',
                    description: 'Interface douce inspirée par Google Material Design. Formes arrondies, couleurs pastel et ombres délicates.',
                },
                'EDT': {
                    name: 'Editorial',
                    category: 'Audacieux',
                    description: 'Style coloré et expressif avec typographie forte. Contrastes marqués et mise en page magazine.',
                },
                'LUX': {
                    name: 'Luxury Dark',
                    category: 'Premium',
                    description: 'Élégance sombre inspirée des marques de luxe. Palette or et noir, finitions raffinées.',
                },
                'BRT': {
                    name: 'Brutal Modern',
                    category: 'Audacieux',
                    description: 'Design industriel audacieux avec formes brutes. Contrastes forts et typographie percutante.',
                },
                'RTF': {
                    name: 'Retro Future',
                    category: 'Audacieux',
                    description: 'Esthétique arcade et rétro-futuriste. Néons vibrants, géométrie audacieuse et ambiance années 80.',
                }
            };

            const style = styleData[styleCode];
            if (!style) return;

            document.getElementById('exampleCategory').textContent = style.category;
            document.getElementById('exampleName').textContent = style.name;
            document.getElementById('exampleDesc').textContent = style.description;

            // Generate example site based on current design state
            const exampleSite = document.getElementById('exampleSite');
            exampleSite.innerHTML = generateExampleSite(styleCode);

            document.getElementById('exampleModal').classList.add('active');
        }

        function closeExample() {
            document.getElementById('exampleModal').classList.remove('active');
        }

        function generateExampleSite(styleCode) {
            const { primary, background, accent } = designState.colors;
            const { radius, density } = designState.settings;

            const borderRadius = radius === 1 ? '4px' : radius === 2 ? '8px' : '16px';
            const padding = density === 1 ? '12px' : density === 2 ? '20px' : '32px';
            const gap = density === 1 ? '12px' : density === 2 ? '20px' : '32px';

            // Generate different layouts based on style
            let siteHTML = '';

            if (styleCode === 'MIN') {
                siteHTML = `
                    <div style="background: ${background}; min-height: 600px; font-family: -apple-system, sans-serif;">
                        <nav style="padding: ${padding}; background: ${background}; border-bottom: 1px solid rgba(0,0,0,0.1);">
                            <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-weight: 700; font-size: 1.5rem; color: ${primary};">Logo</div>
                                <div style="display: flex; gap: ${gap};">
                                    <a href="#" style="color: #333; text-decoration: none;">Accueil</a>
                                    <a href="#" style="color: #333; text-decoration: none;">Services</a>
                                    <a href="#" style="color: #333; text-decoration: none;">Contact</a>
                                </div>
                            </div>
                        </nav>
                        <section style="padding: 80px ${padding}; text-align: center;">
                            <h1 style="font-size: 3.5rem; font-weight: 700; margin-bottom: 20px; color: #000;">Design Minimal</h1>
                            <p style="font-size: 1.3rem; color: #666; max-width: 600px; margin: 0 auto 40px;">
                                L'essence de la simplicité et de l'élégance.
                            </p>
                            <button style="background: ${primary}; color: white; padding: 16px 48px; border: none; border-radius: ${borderRadius}; font-size: 1.1rem; cursor: pointer; font-weight: 600;">
                                Découvrir
                            </button>
                        </section>
                        <section style="padding: ${padding}; max-width: 1200px; margin: 0 auto;">
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: ${gap};">
                                <div style="padding: ${padding}; background: white; border-radius: ${borderRadius}; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                    <h3 style="color: ${primary}; margin-bottom: 12px;">Fonctionnalité 1</h3>
                                    <p style="color: #666;">Description claire et concise.</p>
                                </div>
                                <div style="padding: ${padding}; background: white; border-radius: ${borderRadius}; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                    <h3 style="color: ${primary}; margin-bottom: 12px;">Fonctionnalité 2</h3>
                                    <p style="color: #666;">Interface épurée et intuitive.</p>
                                </div>
                                <div style="padding: ${padding}; background: white; border-radius: ${borderRadius}; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                                    <h3 style="color: ${primary}; margin-bottom: 12px;">Fonctionnalité 3</h3>
                                    <p style="color: #666;">Expérience utilisateur optimale.</p>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            } else if (styleCode === 'GLS') {
                siteHTML = `
                    <div style="background: linear-gradient(135deg, ${primary}20 0%, ${background} 100%); min-height: 600px; font-family: -apple-system, sans-serif;">
                        <nav style="padding: ${padding}; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.3);">
                            <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-weight: 700; font-size: 1.5rem; color: ${primary};">Logo</div>
                                <div style="display: flex; gap: ${gap};">
                                    <a href="#" style="color: #333; text-decoration: none;">Accueil</a>
                                    <a href="#" style="color: #333; text-decoration: none;">Services</a>
                                    <a href="#" style="color: #333; text-decoration: none;">Contact</a>
                                </div>
                            </div>
                        </nav>
                        <section style="padding: 80px ${padding}; text-align: center;">
                            <h1 style="font-size: 3.5rem; font-weight: 700; margin-bottom: 20px; color: #000;">Modern Glass</h1>
                            <p style="font-size: 1.3rem; color: #666; max-width: 600px; margin: 0 auto 40px;">
                                Transparence et sophistication premium.
                            </p>
                            <button style="background: ${primary}; color: white; padding: 16px 48px; border: none; border-radius: ${borderRadius}; font-size: 1.1rem; cursor: pointer; font-weight: 600; box-shadow: 0 8px 32px ${primary}40;">
                                En savoir plus
                            </button>
                        </section>
                        <section style="padding: ${padding}; max-width: 1200px; margin: 0 auto;">
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: ${gap};">
                                <div style="padding: ${padding}; background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(10px); border-radius: ${borderRadius}; border: 1px solid rgba(255,255,255,0.8); box-shadow: 0 8px 32px rgba(0,0,0,0.1);">
                                    <h3 style="color: ${primary}; margin-bottom: 12px;">Transparence</h3>
                                    <p style="color: #666;">Effets de verre dépoli modernes.</p>
                                </div>
                                <div style="padding: ${padding}; background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(10px); border-radius: ${borderRadius}; border: 1px solid rgba(255,255,255,0.8); box-shadow: 0 8px 32px rgba(0,0,0,0.1);">
                                    <h3 style="color: ${primary}; margin-bottom: 12px;">Premium</h3>
                                    <p style="color: #666;">Design haut de gamme et raffiné.</p>
                                </div>
                                <div style="padding: ${padding}; background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(10px); border-radius: ${borderRadius}; border: 1px solid rgba(255,255,255,0.8); box-shadow: 0 8px 32px rgba(0,0,0,0.1);">
                                    <h3 style="color: ${primary}; margin-bottom: 12px;">Innovation</h3>
                                    <p style="color: #666;">Technologie de pointe visuelle.</p>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            } else if (styleCode === 'LUX') {
                const luxBg = '#0a0a0a';
                const luxGold = '#D4AF37';
                siteHTML = `
                    <div style="background: ${luxBg}; min-height: 600px; font-family: Georgia, serif; color: #fff;">
                        <nav style="padding: ${padding}; background: rgba(0, 0, 0, 0.8); border-bottom: 1px solid ${luxGold};">
                            <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-weight: 700; font-size: 1.5rem; color: ${luxGold};">LUXURY</div>
                                <div style="display: flex; gap: ${gap};">
                                    <a href="#" style="color: ${luxGold}; text-decoration: none; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 2px;">Collection</a>
                                    <a href="#" style="color: ${luxGold}; text-decoration: none; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 2px;">Boutique</a>
                                    <a href="#" style="color: ${luxGold}; text-decoration: none; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 2px;">Contact</a>
                                </div>
                            </div>
                        </nav>
                        <section style="padding: 100px ${padding}; text-align: center;">
                            <h1 style="font-size: 4rem; font-weight: 400; margin-bottom: 20px; color: ${luxGold}; letter-spacing: 4px;">EXCELLENCE</h1>
                            <p style="font-size: 1.2rem; color: #aaa; max-width: 600px; margin: 0 auto 40px; font-style: italic;">
                                L'art de la perfection et du raffinement
                            </p>
                            <button style="background: transparent; color: ${luxGold}; padding: 16px 48px; border: 2px solid ${luxGold}; border-radius: ${borderRadius}; font-size: 1rem; cursor: pointer; font-weight: 600; text-transform: uppercase; letter-spacing: 2px;">
                                Découvrir
                            </button>
                        </section>
                        <section style="padding: ${padding}; max-width: 1200px; margin: 0 auto;">
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: ${gap};">
                                <div style="padding: ${padding}; background: rgba(212, 175, 55, 0.05); border-radius: ${borderRadius}; border: 1px solid ${luxGold}40;">
                                    <h3 style="color: ${luxGold}; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 2px;">Prestige</h3>
                                    <p style="color: #aaa; font-size: 0.95rem;">Excellence et sophistication.</p>
                                </div>
                                <div style="padding: ${padding}; background: rgba(212, 175, 55, 0.05); border-radius: ${borderRadius}; border: 1px solid ${luxGold}40;">
                                    <h3 style="color: ${luxGold}; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 2px;">Exclusif</h3>
                                    <p style="color: #aaa; font-size: 0.95rem;">Créations uniques et rares.</p>
                                </div>
                                <div style="padding: ${padding}; background: rgba(212, 175, 55, 0.05); border-radius: ${borderRadius}; border: 1px solid ${luxGold}40;">
                                    <h3 style="color: ${luxGold}; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 2px;">Élégance</h3>
                                    <p style="color: #aaa; font-size: 0.95rem;">Finitions haut de gamme.</p>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            } else {
                // Default example for other styles
                siteHTML = `
                    <div style="background: ${background}; min-height: 600px; font-family: -apple-system, sans-serif;">
                        <nav style="padding: ${padding}; background: ${primary}; color: white;">
                            <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
                                <div style="font-weight: 700; font-size: 1.5rem;">Logo</div>
                                <div style="display: flex; gap: ${gap};">
                                    <a href="#" style="color: white; text-decoration: none;">Accueil</a>
                                    <a href="#" style="color: white; text-decoration: none;">Services</a>
                                    <a href="#" style="color: white; text-decoration: none;">Contact</a>
                                </div>
                            </div>
                        </nav>
                        <section style="padding: 80px ${padding}; text-align: center;">
                            <h1 style="font-size: 3.5rem; font-weight: 700; margin-bottom: 20px; color: ${primary};">Votre Titre</h1>
                            <p style="font-size: 1.3rem; color: #666; max-width: 600px; margin: 0 auto 40px;">
                                Un sous-titre captivant qui décrit votre produit ou service.
                            </p>
                            <button style="background: ${accent}; color: white; padding: 16px 48px; border: none; border-radius: ${borderRadius}; font-size: 1.1rem; cursor: pointer; font-weight: 600;">
                                Commencer
                            </button>
                        </section>
                        <section style="padding: ${padding}; max-width: 1200px; margin: 0 auto;">
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: ${gap};">
                                <div style="padding: ${padding}; background: white; border-radius: ${borderRadius}; box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 2px solid ${primary}20;">
                                    <div style="width: 60px; height: 60px; background: ${primary}; border-radius: 50%; margin-bottom: 16px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">1</div>
                                    <h3 style="color: ${primary}; margin-bottom: 12px; font-weight: 700;">Caractéristique 1</h3>
                                    <p style="color: #666;">Description avec vos couleurs personnalisées.</p>
                                </div>
                                <div style="padding: ${padding}; background: white; border-radius: ${borderRadius}; box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 2px solid ${primary}20;">
                                    <div style="width: 60px; height: 60px; background: ${primary}; border-radius: 50%; margin-bottom: 16px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">2</div>
                                    <h3 style="color: ${primary}; margin-bottom: 12px; font-weight: 700;">Caractéristique 2</h3>
                                    <p style="color: #666;">Avec votre typographie choisie.</p>
                                </div>
                                <div style="padding: ${padding}; background: white; border-radius: ${borderRadius}; box-shadow: 0 4px 16px rgba(0,0,0,0.1); border: 2px solid ${primary}20;">
                                    <div style="width: 60px; height: 60px; background: ${primary}; border-radius: 50%; margin-bottom: 16px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">3</div>
                                    <h3 style="color: ${primary}; margin-bottom: 12px; font-weight: 700;">Caractéristique 3</h3>
                                    <p style="color: #666;">Et vos espacements préférés.</p>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
            }

            return siteHTML;
        }

        // Copy Token
        function copyToken() {
            const token = document.getElementById('token-value').textContent;
            navigator.clipboard.writeText(token).then(() => {
                showAlert('Token copié !', 'Votre token a été copié dans le presse-papier. Conservez-le précieusement.', 'success');
            });
        }

        // Load Token
        function loadToken() {
            showPrompt(
                'Charger un token',
                'Collez votre token design pour charger votre configuration :',
                'info',
                (token) => {
                    if (token && parseToken(token)) {
                        updateUI();
                        currentStep = 1;
                        updateStepDisplay();
                        showAlert('Token chargé avec succès !', 'Votre configuration a été restaurée.', 'success');
                    } else if (token) {
                        showAlert('Token invalide', 'Le token que vous avez entré n\'est pas valide. Veuillez vérifier le format.', 'error');
                    }
                }
            );
        }

        // Validate Design
        function validateDesign() {
            const token = generateToken();
            showConfirm(
                'Configuration prête !',
                'Votre design est configuré. Voulez-vous copier le token dans le presse-papier ?',
                'success',
                () => { copyToken(); },
                null
            );
        }

        // Replace alert and prompt calls
        function validateStep(step) {
            switch(step) {
                case 1:
                    if (!designState.style) {
                        showAlert('Style requis', 'Veuillez sélectionner un style visuel avant de continuer.', 'warning');
                        return false;
                    }
                    break;
                case 3:
                    if (!designState.typography) {
                        showAlert('Typographie requise', 'Veuillez sélectionner une typographie avant de continuer.', 'warning');
                        return false;
                    }
                    break;
            }
            return true;
        }
    </script>
</body>
</html>
